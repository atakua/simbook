% Copyright (c) 2016 Grigory Rechistov <grigory.rechistov@gmail.com>
% This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 Worldwide.
% To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/.

\chapter*{Предисловие}\label{overview}
\addcontentsline{toc}{chapter}{Предисловие}

\dictum[Хорхе Луис Борхес]{Мы легко принимаем действительность, может быть, потому, что интуитивно чувствуем: ничто реально не существует.}


Симулятор, эмулятор, модель компьютера — под всем этим подразумевается компьютерная программа, способная имитировать работу некоторой реальной вычислительной системы (рис.~\ref{fig:idea}). Процесс, а также результат работы такой программы именуется \textit{симуляцией}, и подразумевает изучение эволюции состояния модели во времени, отражающей изменения в поведении и состоянии изучаемого аппаратно-программного комплекса. Следует обратить внимание на отличия данных терминов от более общего понятия \emph{компьютерной модели}.

\setcounter{chapter}{1} % a hack for not to have zero numbered figure
\setcounter{figure}{-1}
\begin{figure}[tp]
    \centering
	\inputpicture{drawings/idea}
    \caption[Основная идея симуляции]{Основная идея симуляции. Модель некоторой вычислительной системы в виде программы исполняется на компьютере другой конфигурации и/или архитектуры}
    \label{fig:idea}
\end{figure}
\setcounter{chapter}{0} % restore the chapter counters
\setcounter{figure}{0}

Существует несколько различных трактовок терминов \textit{симуляция} и \textit{эмуляция}. Наиболее общеупотребительное понимание различия между ними таково: симуляция — некий процесс, имитирующий внешние проявления системы, внутреннее его устройство при этом не повторяет детально оригинал; эмуляция же, кроме внешних эффектов, представляет внутреннюю структуру, максимально приближенную к оригинальной системе. Размышляя над этими определениями, можно заметить, что смысловая грань между ними очень тонка и в основном зависит от того, насколько глубоко мы готовы <<заглянуть>> в модель и в объект моделирования при исследовании; при этом эмуляция может легко оказаться симуляцией. По этой причине далее всюду в тексте понятия \textit{симулятор}, \textit{эмулятор}, \textit{модель} будут использоваться взаимозаменяемо, и их значение будет больше зависеть от контекста обсуждения, чем от строгих определений.

Существующие модели компьютеров различаются множеством параметров, таких как фокусировка на различных аспектах работы изучаемой системы, точность соответствия поведения реальной и моделируемой системы, скорость работы, внутренний дизайн и внешние интерфейсы к нему, задействование различных оптимизационных техник, эвристики, заложенные в процесс симуляции.

Для максимально эффективного усвоения материала книги читателю рекомендуется иметь начальные знания по архитектуре вычислительных систем; рекомендуется обратиться к великолепной книге~\cite{patterson2012rus}. Желательно понимание читателем общих принципов работы операционных систем, а также знакомство как  минимум с одним языком программирования.

Нельзя не упомянуть книгу о виртуальных машинах, которая вдохновила авторов на написание этой работы~\cite{DBLP:books/daglib/0013597}. Знакомство с ней также настоятельно рекомендуется всем читателям, желающим глубже разобраться в вопросе виртуализации.

Необходимо понимать, что методика моделирования применима не только к изучению вычислительных или цифровых, но и практически к любых технических, социальных или каких-либо иных систем. Читателю, желающему расширить своё понимание метода, рекомендуется книга~\cite{system-modeling}.

В главе~\ref{applications} дано описание областей применения симуляторов, введены ключевые понятия и приведены примеры использования технологии симуляции в прошлом и в настоящее время.

В главе~\ref{interpretation} приводится пример построения простого симулятора процессора, основанного на интерпретации инструкций.

В главе~\ref{bt} представлены дальнейшие пути увеличения скорости моделей процессоров, такие как двоичная трансляция и аппаратная виртуализация.

В главе~\ref{traces} рассматривается исследование вычислительных систем с помощью трасс исполнения — записи истории внешних событий.

%Глава~\ref{alternatives} знакомит с альтернативными подходами изучения ЭВМ с помощью различных методик: теории сетей центров обслуживания; сбора и проигрывания трасс событий; вероятностного моделирования.

Глава~\ref{fullplatform} описывает подходы к симуляции системы с множеством устройств, включая многопроцессорные системы.

В главе~\ref{parallel} рассматриваются подходы к параллельной симуляции; показывается, что эффективная и корректная реализация таких систем возможна, но в общем случае довольно сложна.

В главе~\ref{cycle} описан подход к потактовой симуляции, обусловленный иным характером обработки событий в системе и потому отличный от ранее рассмотренных.

В главе~\ref{state} показываются примеры организации хранилищ внутреннего состояния устройств, а также возможные для них оптимизации.

В главе~\ref{caches} кратко рассматриваются назначение и устройство сверхоперативной памяти (кэш-память), а также подходы к её моделированию.

В главе~\ref{lang} определяются существующие языки, используемые для написания моделей устройств, а также показывается их связь с языками, задействованными на поздних фазах, при проектировании устройств.

Глава~\ref{paravirt} знакомит с особенностями обеспечения взаимодействия симуляции с внешним физическим миром.

В главе~\ref{virt} даётся теоретический критерий возможности эффективной виртуализации вычислительных систем; затем проверяется соответствие ряда современных архитектур процессоров этому условию.

В приложениях книги освещаются вопросы, напрямую не относящиеся к моделированию, но происходящие из смежных областей задач проектирования и конструирования микросхем, цифровых систем и вычислительных систем.

\newpage

\section*{Обозначения}

Всюду в тексте данной книги применяются следующие шрифтовые выделения и обозначения.

\begin{itemize*}
    \item Обычный текст используется для основного материала.
    \item \texttt{Моноширинный текст} вводится для исходных текстов программ на различных (псевдо)языках программирования, выделения ключевых слов, имён регистров устройств, листингов машинного кода.
    \item \textit{Наклонный текст} служит для выделения новых понятий.
    \item Числа в шестнадцатеричной системе счисления имеют префикс \textbf{0x} (например, 0x12345abcd), в двоичной системе счисления — суффикс \textbf{b} (например, 10010011b).
    \item Слова, начинающиеся с символа \#, обозначают сигналы на входах и выходах цифровых узлов, например, прерывания: \#RESET.
\end{itemize*}

При введении терминов, заимствованных из английского языка и не имеющих известных авторам общепринятых переводов на русский, в скобках после них будут указываться оригинальные иностранные выражения.

\begin{digression}
    Параграфы, оформленные таким образом, являются необязательными для понимания курса и введены для того, чтобы показать порой неочевидные связи между приёмами моделирования и различными научными идеями и теориями.
\end{digression}


\bibliographystyle{plainnat}
\bibliography{./../mine,./../collection}
