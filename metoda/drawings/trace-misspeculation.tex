% Copyright (c) 2016 Grigory Rechistov <grigory.rechistov@gmail.com>
% This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 Worldwide.
% To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/.

% This file allows to produce either a separate PDF/PNG image
% See standalone documentation to understand underlying magic

\documentclass[tikz,convert={density=150,size=600,outext=.png}]{standalone}
\usetikzlibrary{shapes, calc, arrows, fit, positioning, decorations, patterns, decorations.pathreplacing, chains, snakes}
\input{../setup-web-fonts}
\input{../setup-packages}
\graphicspath{{../pictures/}} % path to pictures, trailing slash is mandatory.

% The actual drawing follows
\begin{document}
    \begin{tikzpicture}[font=\small, >=latex]
        \begin{scope}[start chain,node distance=5mm, every node/.style={on chain, draw, join}, every join/.style={->}]
            \node []              {};
            \node []              {};
            \node []              {};
            \node []    (brnch)   {};
        \end{scope}

        \begin{scope}[start chain,node distance=5mm, every node/.style={on chain, join, draw}, every join/.style={->}]
            \node [below=of brnch, xshift=7mm] (brnch-start) {};
            \node []  (brnch-middle) {};
            \node []  (brnch-end)    {};
        \end{scope}

        \begin{scope}[start chain,node distance=5mm, every node/.style={on chain, join, draw},every join/.style={->}]
            \node [above=of brnch-end, xshift=7mm] (resume) {};
            \node []              {};
            \node []              {};
            \node []    (trace-end)   {};
        \end{scope}

        \draw[->] (brnch) -- (brnch-start);
        \draw[->] (brnch-end) -- (resume);
        \node[draw, help lines, cross out, fit = (brnch-start) (brnch-end)] {};
        
        \node[above=1.3cm of brnch-middle] (arch-label)   {Архитектурно видимые доступы};
        \node[below=0.5cm of brnch-middle]    (cancel-label) {Неправильно предсказанные доступы};
        
    \end{tikzpicture}

\end{document}
