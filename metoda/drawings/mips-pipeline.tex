% Copyright (c) 2016 Grigory Rechistov <grigory.rechistov@gmail.com>
% This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 Worldwide.
% To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/.

% This file allows to produce either a separate PDF/PNG image
% See standalone documentation to understand underlying magic

\documentclass[tikz,convert={density=150,size=600,outext=.png}]{standalone}
\usetikzlibrary{shapes, calc, arrows, fit, positioning, decorations, patterns, decorations.pathreplacing, chains, snakes}
\input{../setup-web-fonts}
\input{../setup-packages}
\graphicspath{{../pictures/}} % path to pictures, trailing slash is mandatory.

% The actual drawing follows
\begin{document}
\begin{tikzpicture}[>=latex, font=\small]

\draw (0,0) rectangle +(0.5,-5) node[rotate=90, midway] {IF/ID};
\draw (3,0) rectangle +(0.5,-5) node[rotate=90, midway] {ID/EX};
\draw (6,0) rectangle +(0.5,-5) node[rotate=90, midway] {EX/MEM};
\draw (9,0) rectangle +(0.5,-5) node[rotate=90, midway] {MEM/WB};

\node[draw] (pc) at (-3, -2.5) {PC} ;
\node[draw, right=0.5 of pc] (memory1) {Memory};

\node[draw, align=left] (reg-file) at (1.75,-2) {Register\\File};

\node[draw, above= of memory1, chamfered rectangle , chamfered rectangle corners={south west, south east}, rotate=90] (adder) {Adder};

\node[draw, below=of reg-file, align=left] (sign) {Sign\\Extend};

\node[draw, right=2.5 of sign, chamfered rectangle , chamfered rectangle corners={south west, south east}, rotate=90] (alu) {ALU};

\node[draw, above=2 of alu] (zero) {zero?};

\node[draw, left=0.5 of alu.north west, anchor=center, chamfered rectangle , chamfered rectangle corners={south west, south east}, rotate=90, inner sep=1pt] (mux1) {\tiny MUX};

\node[draw, left=0.5 of alu.north east, anchor=center, chamfered rectangle , chamfered rectangle corners={south west, south east}, rotate=90, inner sep=1pt] (mux2) {\tiny MUX};

\node[draw, right=2 of alu.south] (memory2) {Memory};

\node[draw, left=0.5 of alu.north east, anchor=center, chamfered rectangle , chamfered rectangle corners={south west, south east}, rotate=90, inner sep=1pt] (mux3) {\tiny MUX};

\node[draw, right=1.5 of memory2, anchor=center, chamfered rectangle , chamfered rectangle corners={south west, south east}, rotate=90, inner sep=1pt] (mux4) {\tiny MUX};


\end{tikzpicture}


\end{document}
