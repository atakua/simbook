% Copyright (c) 2016 Grigory Rechistov <grigory.rechistov@gmail.com>
% This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 Worldwide.
% To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/.

% This file allows to produce either a separate PDF/PNG image
% See standalone documentation to understand underlying magic

\documentclass[tikz,convert={density=150,size=600,outext=.png}]{standalone}
\usetikzlibrary{shapes, calc, arrows, fit, positioning, decorations, patterns, decorations.pathreplacing, chains, snakes}
\input{../setup-web-fonts}
\input{../setup-packages}
\graphicspath{{../pictures/}} % path to pictures, trailing slash is mandatory.

% The actual drawing follows
\begin{document}
    \begin{tikzpicture}[>=latex, font=\scriptsize, node distance=0pt, scale=0.85]

    \draw[->] (0,0) -- (10,0) coordinate[pos=0.2] (c11) coordinate[pos=0.3] (c12) coordinate[pos=0.5] (c13) coordinate[pos=0.6] (c14) coordinate[pos=0.9] (c15);
    \draw[->] (0,-2) -- (10,-2) coordinate[pos=0.1] (c21) coordinate[pos=0.4] (c22) coordinate[pos=0.7] (c23) coordinate[pos=0.8] (c24);
    \draw[->] (0,-4) -- (10,-4) coordinate[pos=0.05] (c31) coordinate[pos=0.5] (c32) coordinate[pos=0.8] (c33) coordinate[pos=0.9] (c34) coordinate[pos=0.6] (c3s);
    
    \node[dotted, shape=dart, draw, shape border rotate=270, above=of c11] (ev11) {};
    \node[dotted, shape=dart, draw, shape border rotate=270, above=of c12] (ev12) {};
    \node[dashed, shape=dart, draw, shape border rotate=270, above=of c13] (ev13) {};
    \node[thick, shape=dart, draw, shape border rotate=270, above=of c14] (ev14) {};

    \node[shape=dart, draw, shape border rotate=270, above=of c15] (ev15) {};
    
    \node[dotted, shape=dart, draw, shape border rotate=270, above=of c21] (ev21) {};
    \node[thick, shape=dart, draw, shape border rotate=270, above=of c22] (ev22) {};
    \node[shape=dart, draw, shape border rotate=270, above=of c23] (ev23) {};
    \node[shape=dart, draw, shape border rotate=270, above=of c24] (ev24) {};
    
    \node[double, shape=dart, draw, shape border rotate=270, above=of ev23] (ev23anti) {};

    \node[dotted, shape=dart, draw, shape border rotate=270, above=of c31] (ev31) {};
    \node[dashed, shape=dart, draw, shape border rotate=270, above=of c32] (ev32) {};
    \node[thick, shape=dart, draw, shape border rotate=270, above=of c33] (ev33) {};
    \node[shape=dart, draw, shape border rotate=270, above=of c34] (ev34) {};
    
    \node[fill=black!10, shape=dart, draw, shape border rotate=270, above=of c3s] (ev3s) {};
    
    \draw[dashed] (4,1) -- (4,-4.5) node {$GVT$};
    
    \node[below=of ev14] {$LVT_1$};
    \node[below=of ev22] {$LVT_2$};
    \node[below=of ev33] {$LVT_3$};
    
    \draw[->] (ev22) to[bend left=45] node[auto, sloped] {Нарушение} (ev3s) ;
    \draw[->] (ev15) to[bend right=45] node[auto, swap] (rollback) {Откат} (ev14) ;
    \draw[->] (rollback) -- (ev23anti);
    
    \end{tikzpicture}


\end{document}
