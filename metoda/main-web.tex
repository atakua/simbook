% Copyright (c) 2016 Grigory Rechistov <grigory.rechistov@gmail.com>
% This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 Worldwide.
% To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/.

% This variant is used for web PDF version of the book.
% Can be compied with XelaTeX:
% * TL 2015 or later

\documentclass[a5paper,11pt,oneside,titlepage, numbers=endperiod]{scrbook}

\input{setup-version}

% A switch to change between document rendering options
\usepackage{etoolbox}

\newtoggle{webpaper}
\toggletrue{webpaper} % Must be true for Web-PDF

\newtoggle{showanswers} % An option to show answers in quizes.
\togglefalse{showanswers}

\newtoggle{inappendix} % we are now in appendix
\togglefalse{inappendix} % ... but not yet

% Create vector pictures from TikZ environments
\newcommand{\inputpicture}[1]{\input{#1}}

\usepackage[top=2.0cm, bottom=2.0cm, left=1.84cm, right=1.5cm, footskip=1cm]{geometry}
\pagestyle{plain} % no headers, page numbers in footers

\input{setup-web-fonts}
\input{setup-biblio}
\input{setup-packages}
\input{setup-appendix}
\input{setup-hacks}

\input{examp-dummy}

\begin{document}

\makeatletter\renewcommand\@biblabel[1]{#1.}\makeatother

\include{title}
\tableofcontents

\include{contrib}

\include{overview}


\include{applications}

\include{interpretation}

\include{bt}

\include{traces}
 
\include{fullplatform}

\include{parallel}

\include{cycle}

\include{state}

\include{caches}

\include{lang}

\include{paravirt}

\include{virt}

\include{afterword}

\toggletrue{inappendix}
\appendix
\appendixpage
\renewcommand{\thechapter}{\Asbuk{chapter}} % Use Russian letters for numbering
\toggletrue{showanswers}
\input{examp-dummy}
\include{appendix-answers}

\include{alternatives}
\include{ic-route}     

\input{history}

%\include{todo}

\phantomsection\label{page:lastpage}

\end{document}
